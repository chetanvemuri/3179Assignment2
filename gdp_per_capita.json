{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "Top 20 Countries by GDP per Capita (1960â€“2024)",
  "width": 900,
  "height": 600,
  "data": {
    "url": "https://raw.githubusercontent.com/chetanvemuri/3179Assignment2/main/gdp_data.csv"
  },
  "transform": [
    {
      "fold": [
        "1960","1961","1962","1963","1964","1965","1966","1967","1968","1969",
        "1970","1971","1972","1973","1974","1975","1976","1977","1978","1979",
        "1980","1981","1982","1983","1984","1985","1986","1987","1988","1989",
        "1990","1991","1992","1993","1994","1995","1996","1997","1998","1999",
        "2000","2001","2002","2003","2004","2005","2006","2007","2008","2009",
        "2010","2011","2012","2013","2014","2015","2016","2017","2018","2019",
        "2020","2021","2022","2023","2024"
      ],
      "as": ["Year", "GDP"]
    },
    { "calculate": "toNumber(datum.GDP)", "as": "GDP_value" },
    { "filter": "datum.GDP_value > 0" },
    {
      "filter": "datum.Year == yearSelector"
    },
    {
      "window": [{ "op": "rank", "as": "rank" }],
      "sort": [{ "field": "GDP_value", "order": "descending" }]
    },
    { "filter": "datum.rank <= 20" }
  ],
  "params": [
    {
      "name": "yearSelector",
      "value": 2024,
      "bind": {
        "input": "range",
        "min": 1960,
        "max": 2024,
        "step": 1
      }
    }
  ],
  "mark": { "type": "bar", "tooltip": true },
  "encoding": {
    "y": {
      "field": "Country Name",
      "type": "nominal",
      "sort": "-x",
      "title": "Country"
    },
    "x": {
      "field": "GDP_value",
      "type": "quantitative",
      "title": "GDP per Capita (US$)",
      "axis": { "format": ",.0f" }
    },
    "color": {
      "field": "GDP_value",
      "type": "quantitative",
      "scale": { "scheme": "blues" },
      "legend": null
    },
    "tooltip": [
      { "field": "Country Name", "type": "nominal", "title": "Country" },
      { "field": "Year", "type": "ordinal", "title": "Year" },
      { "field": "GDP_value", "type": "quantitative", "title": "GDP per Capita (US$)", "format": ",.2f" }
    ]
  },
  "config": {
    "view": { "stroke": null },
    "axis": { "labelFontSize": 12, "titleFontSize": 13 }
  }
}
